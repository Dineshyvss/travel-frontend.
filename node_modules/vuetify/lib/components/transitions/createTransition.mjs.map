{"version":3,"file":"createTransition.mjs","names":["genericComponent","propsFactory","h","Transition","TransitionGroup","makeTransitionProps","disabled","Boolean","group","hideOnLeave","leaveAbsolute","mode","String","origin","createCssTransition","name","arguments","length","undefined","props","setup","_ref","slots","functions","onBeforeEnter","el","style","transformOrigin","onLeave","offsetTop","offsetLeft","offsetWidth","offsetHeight","_transitionInitialStyles","position","top","left","width","height","setProperty","onAfterLeave","tag","css","default","createJavascriptTransition","type","_ref2"],"sources":["../../../src/components/transitions/createTransition.ts"],"sourcesContent":["// Utilities\nimport { genericComponent, propsFactory } from '@/util'\nimport { h, Transition, TransitionGroup } from 'vue'\n\n// Types\nimport type { FunctionalComponent, PropType } from 'vue'\n\nexport const makeTransitionProps = propsFactory({\n  disabled: Boolean,\n  group: Boolean,\n  hideOnLeave: Boolean,\n  leaveAbsolute: Boolean,\n  mode: String,\n  origin: String,\n}, 'transition')\n\nexport function createCssTransition (\n  name: string,\n  origin = 'center center',\n  mode?: string\n) {\n  return genericComponent()({\n    name,\n\n    props: makeTransitionProps({\n      mode,\n      origin,\n    }),\n\n    setup (props, { slots }) {\n      const functions = {\n        onBeforeEnter (el: HTMLElement) {\n          el.style.transformOrigin = props.origin\n        },\n        onLeave (el: HTMLElement) {\n          if (props.leaveAbsolute) {\n            const { offsetTop, offsetLeft, offsetWidth, offsetHeight } = el\n            el._transitionInitialStyles = {\n              position: el.style.position,\n              top: el.style.top,\n              left: el.style.left,\n              width: el.style.width,\n              height: el.style.height,\n            }\n            el.style.position = 'absolute'\n            el.style.top = `${offsetTop}px`\n            el.style.left = `${offsetLeft}px`\n            el.style.width = `${offsetWidth}px`\n            el.style.height = `${offsetHeight}px`\n          }\n\n          if (props.hideOnLeave) {\n            el.style.setProperty('display', 'none', 'important')\n          }\n        },\n        onAfterLeave (el: HTMLElement) {\n          if (props.leaveAbsolute && el?._transitionInitialStyles) {\n            const { position, top, left, width, height } = el._transitionInitialStyles\n            delete el._transitionInitialStyles\n            el.style.position = position || ''\n            el.style.top = top || ''\n            el.style.left = left || ''\n            el.style.width = width || ''\n            el.style.height = height || ''\n          }\n        },\n      }\n\n      return () => {\n        const tag = props.group ? TransitionGroup : Transition\n\n        return h(tag as FunctionalComponent, {\n          name: props.disabled ? '' : name,\n          css: !props.disabled,\n          ...(props.group ? undefined : { mode: props.mode }),\n          ...(props.disabled ? {} : functions),\n        }, slots.default)\n      }\n    },\n  })\n}\n\nexport function createJavascriptTransition (\n  name: string,\n  functions: Record<string, any>,\n  mode = 'in-out'\n) {\n  return genericComponent()({\n    name,\n\n    props: {\n      mode: {\n        type: String as PropType<'in-out' | 'out-in' | 'default'>,\n        default: mode,\n      },\n      disabled: Boolean,\n    },\n\n    setup (props, { slots }) {\n      return () => {\n        return h(Transition, {\n          name: props.disabled ? '' : name,\n          css: !props.disabled,\n          // mode: props.mode, // TODO: vuejs/vue-next#3104\n          ...(props.disabled ? {} : functions),\n        }, slots.default)\n      }\n    },\n  })\n}\n"],"mappings":"AAAA;AAAA,SACSA,gBAAgB,EAAEC,YAAY;AACvC,SAASC,CAAC,EAAEC,UAAU,EAAEC,eAAe,QAAQ,KAAK;;AAEpD;;AAGA,OAAO,MAAMC,mBAAmB,GAAGJ,YAAY,CAAC;EAC9CK,QAAQ,EAAEC,OAAO;EACjBC,KAAK,EAAED,OAAO;EACdE,WAAW,EAAEF,OAAO;EACpBG,aAAa,EAAEH,OAAO;EACtBI,IAAI,EAAEC,MAAM;EACZC,MAAM,EAAED;AACV,CAAC,EAAE,YAAY,CAAC;AAEhB,OAAO,SAASE,mBAAmBA,CACjCC,IAAY,EAGZ;EAAA,IAFAF,MAAM,GAAAG,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,eAAe;EAAA,IACxBL,IAAa,GAAAK,SAAA,CAAAC,MAAA,OAAAD,SAAA,MAAAE,SAAA;EAEb,OAAOlB,gBAAgB,EAAE,CAAC;IACxBe,IAAI;IAEJI,KAAK,EAAEd,mBAAmB,CAAC;MACzBM,IAAI;MACJE;IACF,CAAC,CAAC;IAEFO,KAAKA,CAAED,KAAK,EAAAE,IAAA,EAAa;MAAA,IAAX;QAAEC;MAAM,CAAC,GAAAD,IAAA;MACrB,MAAME,SAAS,GAAG;QAChBC,aAAaA,CAAEC,EAAe,EAAE;UAC9BA,EAAE,CAACC,KAAK,CAACC,eAAe,GAAGR,KAAK,CAACN,MAAM;QACzC,CAAC;QACDe,OAAOA,CAAEH,EAAe,EAAE;UACxB,IAAIN,KAAK,CAACT,aAAa,EAAE;YACvB,MAAM;cAAEmB,SAAS;cAAEC,UAAU;cAAEC,WAAW;cAAEC;YAAa,CAAC,GAAGP,EAAE;YAC/DA,EAAE,CAACQ,wBAAwB,GAAG;cAC5BC,QAAQ,EAAET,EAAE,CAACC,KAAK,CAACQ,QAAQ;cAC3BC,GAAG,EAAEV,EAAE,CAACC,KAAK,CAACS,GAAG;cACjBC,IAAI,EAAEX,EAAE,CAACC,KAAK,CAACU,IAAI;cACnBC,KAAK,EAAEZ,EAAE,CAACC,KAAK,CAACW,KAAK;cACrBC,MAAM,EAAEb,EAAE,CAACC,KAAK,CAACY;YACnB,CAAC;YACDb,EAAE,CAACC,KAAK,CAACQ,QAAQ,GAAG,UAAU;YAC9BT,EAAE,CAACC,KAAK,CAACS,GAAG,GAAI,GAAEN,SAAU,IAAG;YAC/BJ,EAAE,CAACC,KAAK,CAACU,IAAI,GAAI,GAAEN,UAAW,IAAG;YACjCL,EAAE,CAACC,KAAK,CAACW,KAAK,GAAI,GAAEN,WAAY,IAAG;YACnCN,EAAE,CAACC,KAAK,CAACY,MAAM,GAAI,GAAEN,YAAa,IAAG;UACvC;UAEA,IAAIb,KAAK,CAACV,WAAW,EAAE;YACrBgB,EAAE,CAACC,KAAK,CAACa,WAAW,CAAC,SAAS,EAAE,MAAM,EAAE,WAAW,CAAC;UACtD;QACF,CAAC;QACDC,YAAYA,CAAEf,EAAe,EAAE;UAC7B,IAAIN,KAAK,CAACT,aAAa,IAAIe,EAAE,EAAEQ,wBAAwB,EAAE;YACvD,MAAM;cAAEC,QAAQ;cAAEC,GAAG;cAAEC,IAAI;cAAEC,KAAK;cAAEC;YAAO,CAAC,GAAGb,EAAE,CAACQ,wBAAwB;YAC1E,OAAOR,EAAE,CAACQ,wBAAwB;YAClCR,EAAE,CAACC,KAAK,CAACQ,QAAQ,GAAGA,QAAQ,IAAI,EAAE;YAClCT,EAAE,CAACC,KAAK,CAACS,GAAG,GAAGA,GAAG,IAAI,EAAE;YACxBV,EAAE,CAACC,KAAK,CAACU,IAAI,GAAGA,IAAI,IAAI,EAAE;YAC1BX,EAAE,CAACC,KAAK,CAACW,KAAK,GAAGA,KAAK,IAAI,EAAE;YAC5BZ,EAAE,CAACC,KAAK,CAACY,MAAM,GAAGA,MAAM,IAAI,EAAE;UAChC;QACF;MACF,CAAC;MAED,OAAO,MAAM;QACX,MAAMG,GAAG,GAAGtB,KAAK,CAACX,KAAK,GAAGJ,eAAe,GAAGD,UAAU;QAEtD,OAAOD,CAAC,CAACuC,GAAG,EAAyB;UACnC1B,IAAI,EAAEI,KAAK,CAACb,QAAQ,GAAG,EAAE,GAAGS,IAAI;UAChC2B,GAAG,EAAE,CAACvB,KAAK,CAACb,QAAQ;UACpB,IAAIa,KAAK,CAACX,KAAK,GAAGU,SAAS,GAAG;YAAEP,IAAI,EAAEQ,KAAK,CAACR;UAAK,CAAC,CAAC;UACnD,IAAIQ,KAAK,CAACb,QAAQ,GAAG,CAAC,CAAC,GAAGiB,SAAS;QACrC,CAAC,EAAED,KAAK,CAACqB,OAAO,CAAC;MACnB,CAAC;IACH;EACF,CAAC,CAAC;AACJ;AAEA,OAAO,SAASC,0BAA0BA,CACxC7B,IAAY,EACZQ,SAA8B,EAE9B;EAAA,IADAZ,IAAI,GAAAK,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,QAAQ;EAEf,OAAOhB,gBAAgB,EAAE,CAAC;IACxBe,IAAI;IAEJI,KAAK,EAAE;MACLR,IAAI,EAAE;QACJkC,IAAI,EAAEjC,MAAmD;QACzD+B,OAAO,EAAEhC;MACX,CAAC;MACDL,QAAQ,EAAEC;IACZ,CAAC;IAEDa,KAAKA,CAAED,KAAK,EAAA2B,KAAA,EAAa;MAAA,IAAX;QAAExB;MAAM,CAAC,GAAAwB,KAAA;MACrB,OAAO,MAAM;QACX,OAAO5C,CAAC,CAACC,UAAU,EAAE;UACnBY,IAAI,EAAEI,KAAK,CAACb,QAAQ,GAAG,EAAE,GAAGS,IAAI;UAChC2B,GAAG,EAAE,CAACvB,KAAK,CAACb,QAAQ;UACpB;UACA,IAAIa,KAAK,CAACb,QAAQ,GAAG,CAAC,CAAC,GAAGiB,SAAS;QACrC,CAAC,EAAED,KAAK,CAACqB,OAAO,CAAC;MACnB,CAAC;IACH;EACF,CAAC,CAAC;AACJ"}